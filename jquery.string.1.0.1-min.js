/**
 * jquery.string - Prototype string functions for jQuery
 * version: current
 * (c) 2008-2011 David E. Still (http://stilldesigning.com)
 * Original Prototype extensions (c) 2005-2011 Sam Stephenson (http://prototypejs.org)
 */
(function(h){h.extend({__stringPrototype:{JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,ScriptFragment:"<script[^>]*>([\\S\\s]*?)<\/script>",specialChar:{"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r","\\":"\\\\"},blank:function(a){return/^\s*$/.test(this.s(a)||" ")},camelize:function(a){var b=this.s(a).split("-"),c,a=[b[0]];for(c=1;c<b.length;c++)a.push(b[c].charAt(0).toUpperCase()+b[c].substring(1));a=a.join("");return this.r(arguments,0,a)},capitalize:function(a){a=this.s(a);a=a.charAt(0).toUpperCase()+ a.substring(1).toLowerCase();return this.r(arguments,0,a)},dasherize:function(a){a=this.s(a).split("_").join("-");return this.r(arguments,0,a)},empty:function(a){return this.s(a)===""},endsWith:function(a,b){var b=this.s(b),c=b.length-a.length;return c>=0&&b.lastIndexOf(a)===c},escapeHTML:function(a){a=this.s(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return this.r(arguments,0,a)},evalJSON:function(a,b){var b=this.s(b),c=this.unfilterJSON(!1,b);try{if(!a||this.isJSON(c))return eval("("+ c+")")}catch(d){}throw new SyntaxError("Badly formed JSON string: "+b);},evalScripts:function(a){var a=this.extractScripts(this.s(a)),b=[];if(a.length>0)for(var c=0;c<a.length;c++)b.push(eval(a[c]));return b},extractScripts:function(a){var b=RegExp(this.ScriptFragment,"img"),c=RegExp(this.ScriptFragment,"im"),a=this.s(a).match(b)||[],b=[];if(a.length>0)for(var d=0;d<a.length;d++)b.push(a[d].match(c)[1]||"");return b},gsub:function(a,b,c){c=this.s(c);c=h.isFunction(b)?this.sub(a,b,-1,c):c.split(a).join(b); return this.r(arguments,2,c)},include:function(a,b){return this.s(b).indexOf(a)>-1},inspect:function(a,b){var b=this.s(b),c;try{c=this.sub(/[\x00-\x1f\\]/,function(a){var b=h.__stringPrototype.specialChar[a[0]];return b?b:"\\u00"+a[0].charCodeAt().toPaddedString(2,16)},-1,b)}catch(d){c=b}b=a?'"'+c.replace(/"/g,'\\"')+'"':"'"+c.replace(/'/g,"\\'")+"'";return this.r(arguments,1,b)},interpolate:function(a,b,c){c=this.s(c);b||(b=/(\#\{\s*(\w+)\s*\})/);var d=c.match(RegExp(b.source,"g")),e;for(e=0;e<d.length;e++)c= c.replace(d[e],a[d[e].match(b)[2]]);return this.r(arguments,2,c)},isJSON:function(a){a=this.s(a);if(this.blank(a))return!1;a=a.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,"");return/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(a)},scan:function(a,b,c){c=this.s(c);this.sub(a,b,-1,c);return this.r(arguments,2,c)},startsWith:function(a,b){return this.s(b).indexOf(a)===0},strip:function(a){a=h.trim(this.s(a));return this.r(arguments,0,a)},stripScripts:function(a){a=this.s(a).replace(RegExp(this.ScriptFragment, "img"),"");return this.r(arguments,0,a)},stripTags:function(a){a=this.s(a).replace(/<\/?[^>]+>/gi,"");return this.r(arguments,0,a)},sub:function(a,b,c,d){d=this.s(d);if(c<=0||isNaN(c))return this;if(a.source&&!a.global){var e=a.ignoreCase?"ig":"g";e+=a.multiline?"m":"";a=RegExp(a.source,e)}var e=d.split(a),f=d.match(a);h.browser.msie&&(d.indexOf(f[0])==0&&e.unshift(""),d.lastIndexOf(f[f.length-1])==d.length-f[f.length-1].length&&e.push(""));for(var d=e[0],g=1;g<e.length;g++)d+=g<=c?h.isFunction(b)? b(f[g-1]||f)+e[g]:b+e[g]:(f[g-1]||f)+e[g];return this.r(arguments,3,d)},succ:function(a){a=this.s(a);a=a.slice(0,a.length-1)+String.fromCharCode(a.charCodeAt(a.length-1)+1);return this.r(arguments,0,a)},times:function(a,b){for(var b=this.s(b),c="",d=0;d<a;d++)c+=b;return this.r(arguments,1,c)},toJSON:function(a){return this.r(arguments,0,this.inspect(!0,this.s(a)))},toQueryParams:function(a,b){var b=this.s(b),c=b.substring(b.indexOf("?")+1).split("#")[0].split(a||"&"),d={},e,f,g;for(e=0;e<c.length;e++)g= c[e].split("="),f=decodeURIComponent(g[0]),g=g[1]?decodeURIComponent(g[1]):void 0,d[f]?(typeof d[f]=="string"&&(d[f]=[d[f]]),d[f].push(g)):d[f]=g;return d},truncate:function(a,b,c){c=this.s(c);a=a||30;b=!b?"...":b;c=c.length>a?c.slice(0,a-b.length)+b:String(c);return this.r(arguments,2,c)},underscore:function(a){a=this.sub(/[A-Z]/,function(a){return"_"+a.toLowerCase()},-1,this.s(a));a.charAt(0)=="_"&&(a=a.substring(1));return this.r(arguments,0,a)},unescapeHTML:function(a){a=this.stripTags(this.s(a)).replace(/&amp;/g, "&").replace(/&lt;/g,"<").replace(/&gt;/g,">");return this.r(arguments,0,a)},unfilterJSON:function(a,b){var b=this.s(b),a=a||this.JSONFilter,c=b.match(a),b=c!==null?c[1]:b;return this.r(arguments,1,b)},value:function(){return this.str},r:function(a,b,c){return a.length>b||this.str===void 0?c:(this.str=""+c,this)},s:function(a){if(a===""||a)return a;if(this.str===""||this.str)return this.str;return this}},string:function(a){if(a===String.prototype)h.extend(String.prototype,h.__stringPrototype);else return h.extend({str:a}, h.__stringPrototype)}});h.__stringPrototype.parseQuery=h.__stringPrototype.toQueryParams})(jQuery);